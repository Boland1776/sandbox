pipeline {
  agent {
        node {
            label 'v2_builder'
        }
    }
  stages {
    stage ('Clean npm-dev artifactory repo') {
      steps {
        echo 'Calling script'
        if (${env.MAX_DAYS}) {
          options = options + " -d ${env.MAX_DAYS}"
        }
        if (${env.VERBOSE}) {
          options = options + " -v"
        }
        if (${env.SKIP_LIST}) {
          options = options + " -S ${env.SKIP_LIST}"
        }
        withCredentials([[$class: 'UsernamePasswordMultiBinding', credentialsId: 'c376347e-4245-49fc-be2c-b4aa0ddce81f',usernameVariable: 'NAME', passwordVariable: 'WORD']]) {
          sh "python REL-11257/npm-dev-cleaner.py ${options} -u ${NAME} -p ${WORD}"
        }
      }
    }
  }
}
